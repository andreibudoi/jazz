import { CodeGroup } from "@/components/forMdx";

export const metadata = {
  description: "Explore the implementation of soft deletion for data management and recovery."
};

# Soft Deletion 

Implementing a soft deletion pattern by using a `deleted` flag allows you to maintain data for potential recovery and auditing. 

Simply add an optional `deleted` boolean to the CoValue you want to delete in the schema.

<CodeGroup>
```ts
export class Team extends CoMap {
    name = co.string;
    apps = co.ref(ListOfApps);
    deleted = co.optional.boolean;
}
```
</CodeGroup>
When an object needs to be "deleted," instead of removing it from the database, the deleted flag is set to true.

Create methods in CoList classes, which explicitly filter out items where the deleted property is true, ensuring these items are not surfaced in standard queries.

<CodeGroup>
```ts
export class ListOfTeams extends CoList.Of(co.ref(Team)) {
    getAll(this: ListOfTeams) {
        return this.filter(
            (team): team is Team =>
                !team?.deleted && team?._owner.castAs(Group).myRole() !== undefined,
        );
    }
}
```
</CodeGroup>

There are several benefits to utilizing this soft delete pattern, including the ability to recover deleted data, it helps maintain data integrity for relationships, and potentially support audit trails.

